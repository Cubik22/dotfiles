# aliasrc

# bat as manpager (set bat config)
#export MANPAGER="bat_man.sh"

alias d="doas"
alias sudo="doas"
alias ls="ls --color=auto --group-directories-first --format=horizontal --human-readable"
alias lsa="ls --color=auto --group-directories-first --format=horizontal --human-readable -a"
alias lsl="ls --color=auto --group-directories-first --format=horizontal --human-readable -l"
alias lsal="ls --color=auto --group-directories-first --format=horizontal --human-readable -a -l"
alias lsla="ls --color=auto --group-directories-first --format=horizontal --human-readable -l -a"
alias dir="dir --color=auto"
alias vdir="vdir --color=auto"
alias grep="grep --color=auto"
alias fgrep="fgrep --color=auto"
alias egrep="egrep --color=auto"
alias diff="diff --color=auto"
alias ip="ip -color=auto"
alias mkdir="mkdir -pv"
alias cp="cp -r"
alias space="du -sh"
alias n3="nnn"
alias ..="cd .."
alias cd..="cd .."
alias trexa="exa --long --header --modified --git --tree --color=auto --icons --all --group-directories-first"
alias nv="nvim"
alias xq="xbps-query"
#alias gpg="gpg2"
alias iwdscan="iwctl station wlan0 scan"
#alias chromium="ungoogled_chromium.sh"

# confirm before overwriting something
alias cp="cp -i"
alias mv='mv -i'
alias rm='echo "in order to move the file/directory in the trash use trash-put"; rm -i'

# human-readable sizes
alias df='df -h'
# show sizes in MB
alias free='free -m'

# ps (current processes)
alias psa="ps auxf"
alias psgrep="ps aux | grep -v grep | grep -i -e VSZ -e"
alias psmem='ps auxf | sort -nr -k 4'
alias pscpu='ps auxf | sort -nr -k 3'

# verify signature for isos
alias gpg-check="gpg --keyserver-options auto-key-retrieve --verify"
# receive the key of a developer
alias gpg-retrieve="gpg --keyserver-options auto-key-retrieve --receive-keys"

# git related
alias gst="git status"
alias gad="git add"
alias gbr="git branch"
alias gcm="git commit"
alias gdf="git diff"
alias gfe="git fetch"
alias glg="git log"
alias gco="git checkout"
alias gps="rbw unlock; git push"
alias grb="git rebase"
alias gsa="git stash"
alias gpl="git pull"

# void mirrors in order to quickly change when one si slow (R flag)
mirror1="https://alpha.de.repo.voidlinux.org/current/musl"
mirror2="https://mirrors.servercentral.com/voidlinux/current/musl"
mirror3="https://alpha.us.repo.voidlinux.org/current/musl"

# so the root can link and use this bashrc
if [ "$LOGNAME" = "root" ] || [ "$(id -u)" -eq 0 ]; then
	alias xi="xbps-install"
	alias xr="xbps-remove"
else
	alias dn3="doas nnn"
	alias dnv="doas nvim"
	
	alias xi="doas xbps-install"
	alias xr="doas xbps-remove"
fi

# before push unlock bitwarden
git () {
	if [ "$#" -ge 1 ] && [ $1 = "push" ]; then
		rbw unlock
	fi
	/usr/bin/git "$@"
}

# git bare repository config files
# when called as user dotfiles when called as root global files
config () {
	# when adding echo to remember to pull before commit
	if [ "$#" -ge 1 ]; then
		if [ $1 = "add" ]; then
			echo "remember to pull before commit"
		elif [ $1 = "push" ]; then
			rbw unlock
		fi
	fi
	if [ "$LOGNAME" = "root" ] || [ "$(id -u)" -eq 0 ]; then
		local work_tree="/"
		local git_dir="/root/config"
	else
		local work_tree="$HOME"
		local git_dir="$HOME/.dotfiles"
	fi
	/usr/bin/git --git-dir="$git_dir"/ --work-tree="$work_tree" "$@"
	# when pulling remove README from work_tree and set git to not track in locale
	if [ "$#" -ge 1 ]; then
		if [ $1 = "pull" ]; then
			rm -f "$work_tree"/README.md
			/usr/bin/git --git-dir="$git_dir"/ --work-tree="$work_tree" update-index --assume-unchanged "$work_tree"/README.md
		fi
	fi
}
