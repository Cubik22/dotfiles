#!/bin/sh

# symlink stuff to root

if [ "$#" -eq 1 ]; then
    backup_dir="$1"
else
    backup_dir="/root/backup-bare"
fi

doas mv -f /root/.bash_profile "$backup_dir"
doas mv -f /root/.bashrc "$backup_dir"
doas mv -f /root/.inputrc "$backup_dir"
doas mv -f /root/.dir_colors "$backup_dir"

doas mv -f /root/.terminfo "$backup_dir"

doas mv -f /root/.config/git "$backup_dir"
doas mv -f /root/.config/ripgrep "$backup_dir"
doas mv -f /root/.config/waylock "$backup_dir"
doas mv -f /root/.config/swaylock "$backup_dir"

doas mv -f /root/.local/share/bash "$backup_dir"

doas mv -f /root/.config/shell "$backup_dir"
doas mv -f /root/.config/kak "$backup_dir"
doas mv -f /root/.config/kak-lsp "$backup_dir"
doas mv -f /root/.local/share/kak "$backup_dir"
doas mv -f /root/.config/nvim "$backup_dir"
doas mv -f /root/.local/share/nvim "$backup_dir"

doas ln -s "$HOME/.bash_profile" /root/.bash_profile
doas ln -s "$HOME/.bashrc" /root/.bashrc
doas ln -s "$HOME/.inputrc" /root/.inputrc
doas ln -s "$HOME/.dir_colors" /root/.dir_colors

mkdir -p "$HOME/.terminfo"
doas ln -s "$HOME/.terminfo" /root/

doas mkdir -p "/root/.config"
doas mkdir -p "/root/.config/git"
doas mkdir -p "/root/.config/ripgrep"
doas mkdir -p "/root/.config/waylock"
doas mkdir -p "/root/.config/swaylock"

doas mkdir -p "/root/.local/share/bash"

doas ln -s "$HOME/.config/git/config" /root/.config/git/
doas ln -s "$HOME/.config/ripgrep/rc" /root/.config/ripgrep/
doas ln -s "$HOME/.config/waylock/waylock.toml" /root/.config/waylock/
doas ln -s "$HOME/.config/swaylock/config" /root/.config/swaylock/

doas ln -s "$HOME/.config/shell" /root/.config/
doas ln -s "$HOME/.config/kak" /root/.config/
doas ln -s "$HOME/.config/kak-lsp" /root/.config/
doas ln -s "$HOME/.local/share/kak" /root/.local/share/
doas ln -s "$HOME/.config/nvim" /root/.config/
doas ln -s "$HOME/.local/share/nvim" /root/.local/share/

# link kak scripts
doas mkdir -p /root/.local/bin
doas ln -s "$HOME"/.local/bin/kak* /root/.local/bin/
